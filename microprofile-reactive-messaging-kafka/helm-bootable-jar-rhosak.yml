# TODO Update to point to the released quickstarts and image
# Will need a diff commit in the upstream-to-product repository
build:
  uri: https://github.com/wildfly/quickstart.git
  contextDir: microprofile-reactive-messaging-kafka
  mode: bootable-jar
  env:
  - name: MAVEN_OPTS
    value: -XX:MetaspaceSize=256m -XX:MaxMetaspaceSize=256m
  - name: MAVEN_ARGS_APPEND
    # Use the bootable-jar-openshift profile to ensure that the application
    # can be deployed on OpenShift but disable JKube as the image will be
    # built and deployed by this chart.
    value: -Pbootable-jar-openshift,os-jar-rhosak -Djkube.skip=true
deploy:
  replicas: 1
  volumeMounts:
    - name: rhoas
      mountPath: /etc/config/rhoas
      readOnly: true
  volumes:
    - name: rhoas
      secret:
        secretName: rhoas